# Generated by Django 4.2.26 on 2025-11-22 08:53

from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='EvolutionReportModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('report_date', models.DateField(db_index=True, verbose_name='报告日期')),
                ('summary', models.TextField(verbose_name='摘要')),
                ('strategy_evolution', models.JSONField(default=dict, verbose_name='策略进化')),
                ('new_strategies_count', models.IntegerField(default=0, verbose_name='新增策略数')),
                ('retired_strategies_count', models.IntegerField(default=0, verbose_name='淘汰策略数')),
                ('strategy_pool_size', models.IntegerField(default=0, verbose_name='策略池规模')),
                ('decision_evolution', models.JSONField(default=dict, verbose_name='决策进化')),
                ('decision_accuracy', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='决策准确率')),
                ('confidence_calibration', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='置信度校准')),
                ('execution_evolution', models.JSONField(default=dict, verbose_name='执行进化')),
                ('avg_slippage', models.DecimalField(blank=True, decimal_places=6, max_digits=10, null=True, verbose_name='平均滑点')),
                ('execution_success_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='执行成功率')),
                ('memory_evolution', models.JSONField(default=dict, verbose_name='记忆进化')),
                ('memory_count', models.IntegerField(default=0, verbose_name='记忆总数')),
                ('knowledge_nodes', models.IntegerField(default=0, verbose_name='知识节点数')),
                ('learning_curve', models.JSONField(blank=True, default=list, verbose_name='学习曲线')),
                ('evolution_speed', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='进化速度')),
                ('improvements', models.JSONField(blank=True, default=list, verbose_name='改进点')),
                ('bottlenecks', models.JSONField(blank=True, default=list, verbose_name='瓶颈')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '进化报告',
                'verbose_name_plural': '进化报告',
                'db_table': 'evolution_report',
                'ordering': ['-report_date'],
            },
        ),
        migrations.CreateModel(
            name='SimulationComparisonModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('comparison_date', models.DateField(db_index=True, verbose_name='对比日期')),
                ('aggressive_performance', models.JSONField(default=dict, verbose_name='激进策略表现')),
                ('conservative_performance', models.JSONField(default=dict, verbose_name='保守策略表现')),
                ('ai_综合_performance', models.JSONField(default=dict, verbose_name='AI综合策略表现')),
                ('best_strategy', models.CharField(max_length=50, verbose_name='最佳策略')),
                ('comparison_summary', models.TextField(verbose_name='对比摘要')),
                ('aggressive_score', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='激进策略评分')),
                ('conservative_score', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='保守策略评分')),
                ('ai_score', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='AI综合评分')),
                ('key_findings', models.JSONField(blank=True, default=list, verbose_name='关键发现')),
                ('improvement_recommendations', models.JSONField(blank=True, default=list, verbose_name='改进建议')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '模拟盘对比',
                'verbose_name_plural': '模拟盘对比',
                'db_table': 'simulation_comparison',
                'ordering': ['-comparison_date'],
            },
        ),
        migrations.CreateModel(
            name='ReviewReportModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('report_type', models.CharField(choices=[('daily', '日报'), ('weekly', '周报'), ('monthly', '月报'), ('quarterly', '季报')], db_index=True, max_length=20, verbose_name='报告类型')),
                ('report_date', models.DateField(db_index=True, verbose_name='报告日期')),
                ('title', models.CharField(max_length=500, verbose_name='标题')),
                ('summary', models.TextField(verbose_name='摘要')),
                ('report_data', models.JSONField(default=dict, verbose_name='报告数据')),
                ('performance_overview', models.JSONField(default=dict, verbose_name='业绩概览')),
                ('total_return', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='总收益率')),
                ('win_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='胜率')),
                ('sharpe_ratio', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='夏普比率')),
                ('max_drawdown', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='最大回撤')),
                ('trade_count', models.IntegerField(default=0, verbose_name='交易次数')),
                ('win_count', models.IntegerField(default=0, verbose_name='盈利次数')),
                ('lose_count', models.IntegerField(default=0, verbose_name='亏损次数')),
                ('best_trades', models.JSONField(blank=True, default=list, verbose_name='最佳交易')),
                ('worst_trades', models.JSONField(blank=True, default=list, verbose_name='最差交易')),
                ('lessons_learned', models.JSONField(blank=True, default=list, verbose_name='经验总结')),
                ('success_cases', models.JSONField(blank=True, default=list, verbose_name='成功案例')),
                ('failure_cases', models.JSONField(blank=True, default=list, verbose_name='失败案例')),
                ('strategy_analysis', models.JSONField(blank=True, default=dict, verbose_name='策略分析')),
                ('best_strategies', models.JSONField(blank=True, default=list, verbose_name='最佳策略')),
                ('worst_strategies', models.JSONField(blank=True, default=list, verbose_name='最差策略')),
                ('market_insights', models.JSONField(blank=True, default=dict, verbose_name='市场洞察')),
                ('improvement_suggestions', models.JSONField(blank=True, default=list, verbose_name='改进建议')),
                ('action_items', models.JSONField(blank=True, default=list, verbose_name='行动项')),
                ('evolution_summary', models.JSONField(blank=True, default=dict, verbose_name='进化摘要')),
                ('cognitive_bias_analysis', models.JSONField(blank=True, default=dict, verbose_name='认知偏见分析')),
                ('generated_by', models.CharField(default='AI', max_length=50, verbose_name='生成者')),
                ('is_published', models.BooleanField(default=False, verbose_name='是否已发布')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
            ],
            options={
                'verbose_name': '复盘报告',
                'verbose_name_plural': '复盘报告',
                'db_table': 'review_report',
                'ordering': ['-report_date'],
                'indexes': [models.Index(fields=['report_type', '-report_date'], name='review_repo_report__5117e5_idx'), models.Index(fields=['is_published', '-report_date'], name='review_repo_is_publ_aa285f_idx')],
                'unique_together': {('report_type', 'report_date')},
            },
        ),
        migrations.CreateModel(
            name='PerformanceMetricsModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('metric_type', models.CharField(choices=[('portfolio', '组合'), ('strategy', '策略'), ('agent', '智能体')], db_index=True, max_length=20, verbose_name='指标类型')),
                ('metric_date', models.DateField(db_index=True, verbose_name='指标日期')),
                ('object_id', models.CharField(db_index=True, max_length=200, verbose_name='对象ID')),
                ('object_name', models.CharField(max_length=200, verbose_name='对象名称')),
                ('daily_return', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='日收益率')),
                ('cumulative_return', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='累计收益率')),
                ('volatility', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='波动率')),
                ('sharpe_ratio', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='夏普比率')),
                ('max_drawdown', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='最大回撤')),
                ('trade_count', models.IntegerField(default=0, verbose_name='交易次数')),
                ('win_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='胜率')),
                ('avg_win', models.DecimalField(blank=True, decimal_places=2, max_digits=20, null=True, verbose_name='平均盈利')),
                ('avg_loss', models.DecimalField(blank=True, decimal_places=2, max_digits=20, null=True, verbose_name='平均亏损')),
                ('profit_factor', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='盈利因子')),
                ('position_count', models.IntegerField(default=0, verbose_name='持仓数量')),
                ('position_utilization', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='仓位利用率')),
                ('detailed_metrics', models.JSONField(blank=True, default=dict, verbose_name='详细指标')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '性能指标',
                'verbose_name_plural': '性能指标',
                'db_table': 'performance_metrics',
                'ordering': ['-metric_date'],
                'indexes': [models.Index(fields=['metric_type', 'object_id', '-metric_date'], name='performance_metric__fea99f_idx'), models.Index(fields=['metric_type', '-metric_date'], name='performance_metric__a4bdce_idx')],
                'unique_together': {('metric_type', 'object_id', 'metric_date')},
            },
        ),
        migrations.CreateModel(
            name='AlertModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('alert_level', models.CharField(choices=[('info', '信息'), ('warning', '警告'), ('error', '错误'), ('critical', '严重')], db_index=True, max_length=20, verbose_name='告警级别')),
                ('alert_type', models.CharField(choices=[('risk', '风险告警'), ('performance', '性能告警'), ('system', '系统告警'), ('market', '市场告警'), ('decision', '决策告警')], db_index=True, max_length=50, verbose_name='告警类型')),
                ('status', models.CharField(choices=[('active', '活跃'), ('acknowledged', '已确认'), ('resolved', '已解决'), ('ignored', '已忽略')], default='active', max_length=20, verbose_name='状态')),
                ('title', models.CharField(max_length=500, verbose_name='标题')),
                ('message', models.TextField(verbose_name='消息')),
                ('details', models.JSONField(blank=True, default=dict, verbose_name='详细信息')),
                ('triggered_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='触发时间')),
                ('trigger_value', models.CharField(blank=True, max_length=200, null=True, verbose_name='触发值')),
                ('threshold', models.CharField(blank=True, max_length=200, null=True, verbose_name='阈值')),
                ('related_object_type', models.CharField(blank=True, max_length=50, null=True, verbose_name='关联对象类型')),
                ('related_object_id', models.CharField(blank=True, max_length=200, null=True, verbose_name='关联对象ID')),
                ('acknowledged_at', models.DateTimeField(blank=True, null=True, verbose_name='确认时间')),
                ('acknowledged_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='确认人')),
                ('resolved_at', models.DateTimeField(blank=True, null=True, verbose_name='解决时间')),
                ('resolution_notes', models.TextField(blank=True, null=True, verbose_name='解决备注')),
                ('is_notified', models.BooleanField(default=False, verbose_name='是否已通知')),
                ('notification_channels', models.JSONField(blank=True, default=list, verbose_name='通知渠道')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
            ],
            options={
                'verbose_name': '告警',
                'verbose_name_plural': '告警',
                'db_table': 'alert',
                'ordering': ['-triggered_at'],
                'indexes': [models.Index(fields=['status', '-triggered_at'], name='alert_status_46f066_idx'), models.Index(fields=['alert_level', 'status', '-triggered_at'], name='alert_alert_l_7734ef_idx'), models.Index(fields=['alert_type', '-triggered_at'], name='alert_alert_t_db54a5_idx')],
            },
        ),
    ]
